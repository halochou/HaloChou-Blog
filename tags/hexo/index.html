<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>hexo | ZhouYang&#39;s Blog</title>
  <meta name="author" content="Zhou Yang">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="ZhouYang&#39;s Blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.ico" rel="icon" type="image/x-ico">
  <link rel="alternate" href="/atom.xml" title="ZhouYang&#39;s Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">ZhouYang&#39;s Blog</a></h1>
  <h2><a href="/">Tech &amp; Life Record</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
    <li> <a href="/atom.xml">RSS</a> </li>
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title tag">hexo</h2>


  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-01-08T02:10:18.000Z"><a href="/2014/01/08/hexo-config/">1月 8 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/01/08/hexo-config/">hexo-config</a></h1>
  

    </header>
    <div class="entry">
      
        <p>第一次搭博客，发现这还真是个挺有意思的话题。</p>
<h1 id="-5e73-53f0-9009-62e9-">平台选择</h1>
<p>本人基本上患有选择困难症，之前用Linux的时候，每个月换一次发行版，这次挑选博客平台时又毫无意外的花了很长时间抉择。经过一般挖掘，大致有以下几个选项。</p>
<ul>
<li>Wordpress </li>
</ul>
<p>优点：主流博客平台，资源众多，易上手。</p>
<p>缺点：作为老牌平台，有些臃肿，我也不计划对PHP深挖，不便未来折腾；Wordpress.com因某些原因无法访问（You Know），其他国内平台又不大想用，自己搭的话，主页空间自由度不高，VPS又太贵~</p>
<ul>
<li>Ghost</li>
</ul>
<p>主页介绍看起来很诱人，可惜没有免费服务，只能自己在本地搭个玩玩，等以后有VPS了再折腾吧。</p>
<ul>
<li>Jekyll / Octopress</li>
</ul>
<p>Github Pages默认引擎，好多大神貌似都在用。试用了一下，还是挺不错的，符合高度定制化的Geek风格，。不过就是太折腾，都搭好了估计早就懒得写博文了……另外据说文章多了性能是个问题。</p>
<ul>
<li>Hexo</li>
</ul>
<p>最终选定Hexo，台湾同胞的作品，难望其项背啊。看看人家的功力，再看看自己…唉……</p>
<p>优点：Hexo是一个基于Node.js的博客框架，十分简约，默认主题很优雅，效率很好，而且可以生成静态网页后自动部署到Github上，一举两得。</p>
<p>缺点：还是有点小众，资源略少，出了Bug Google未必知道。</p>
<h1 id="Hexo-5b89-88c5-">Hexo安装</h1>
<p><a href="http://zespia.tw/hexo/docs/setup.html" target="_blank">Hexo官网</a>有很详细的介绍，其实只要一个命令就足够了。</p>
<pre><code><span class="comment">npm</span> <span class="comment">install</span> <span class="literal">-</span><span class="comment">g</span> <span class="comment">hexo</span>
</code></pre><p>之后初始化自己的博客就齐了。</p>
<pre><code><span class="title">hexo</span> init blog
</code></pre><p>默认目录结构：</p>
<pre><code>.
├── <span class="title">_config</span>.yml
├── package.json
├── scaffolds
├── scripts
├── source
|   ├── <span class="title">_drafts</span>
|   └── <span class="title">_posts</span>
└── themes
</code></pre><h1 id="Hexo-4f18-5316-">Hexo优化</h1>
<p>Hexo的初始配置很简约，而且默认的评论分享模块不符合天朝国情（此处省略一万字……），还是要自己打理一下才好。做了修改之后，可以用这个命令测试一下：</p>
<pre><code><span class="title">hexo</span> server
</code></pre><p>或者</p>
<pre><code><span class="title">hexo</span> s
</code></pre><p>默认配置会在localhost:4000建立一个webserver，自行查看即可。</p>
<h2 id="-4e3b-9898-">主题</h2>
<p>通过npm安装过来的hexo默认主题是landscape，不是传说中的light，原因不明（下一代？没light好看），有知道的朋友还望告诉一声。</p>
<p>安装light，在blog根目录下执行：</p>
<pre><code><span class="comment">git</span> <span class="comment">clone</span> <span class="comment">git://github</span><span class="string">.</span><span class="comment">com/tommy351/hexo</span><span class="literal">-</span><span class="comment">theme</span><span class="literal">-</span><span class="comment">light</span><span class="string">.</span><span class="comment">git</span> <span class="comment">themes/light</span>
</code></pre><p>修改<code>/_config.yml</code>：</p>
<pre><code><span class="attribute">theme</span>: <span class="string">light</span>
</code></pre><h2 id="-56fe-7247-6587-4ef6-5939-">图片文件夹</h2>
<p>使用markdown写文章，插入图片的格式为<code>![图片名称](链接地址)</code>，其中链接地址是个url，这里针对hexo，可以创建<code>/source/img</code>目录，引用时用下面语句即可：</p>
<pre><code>!<span class="link_label">[lable]</span>(<span class="link_url">/img/hexo-github-deploy/01.png</span>)  
</code></pre><h2 id="-914d-7f6e-7f51-7ad9-4fe1-606f-">配置网站信息</h2>
<p><code>/_config.yml</code>文件存储了该blog的全局信息，修改其中Site字段：</p>
<pre><code><span class="preprocessor"># Site</span>
<span class="title">title</span>: <span class="type">ZhouYang's</span> <span class="type">Blog</span>
<span class="title">subtitle</span>: <span class="type">Tech</span> &amp; <span class="type">Life</span> <span class="type">Record</span>
<span class="title">description</span>:
<span class="title">author</span>: <span class="type">Zhou</span> <span class="type">Yang</span>
<span class="title">email</span>:halo.chou@gmail.com
<span class="title">language</span>: zh-<span class="type">CN</span>
<span class="preprocessor"># URL</span>
<span class="title">url</span>: http://halochou.github.com
</code></pre><h2 id="-66ff-6362-8bc4-8bba-6a21-5757-">替换评论模块</h2>
<p>hexo默认使用国外比较流行的disqus评论模块。</p>
<p>说实话，之前没研究过，原来评论系统也可以是一个单独的提供商。disqus支持的登录帐号包括Google+、Facebook……你懂了。</p>
<p>国内提供类似服务的是<a href="http://duoshuo.com" target="_blank">多说</a>，注册一个帐号后可以拿到针对自己的通用代码。</p>
<p>修改<code>/themes/light/layout/_partial/comment.ejs</code>，<br>删除原有的关于disqus和facebook的代码：</p>
<pre><code><span class="vbscript">&lt;% <span class="keyword">if</span> (page.comments){ %&gt;</span>
<span class="tag">&lt;<span class="title">section</span> <span class="attribute">id</span>=<span class="value">"comment"</span>&gt;</span>
  <span class="tag">&lt;<span class="title">h1</span> <span class="attribute">class</span>=<span class="value">"title"</span>&gt;</span><span class="vbscript">&lt;%= __(<span class="comment">'comment') %&gt;</span></span><span class="tag">&lt;/<span class="title">h1</span>&gt;</span>
  <span class="tag">&lt;<span class="title">!</span> <span class="attribute">Your</span> <span class="attribute">Code</span> &gt;</span>
<span class="tag">&lt;/<span class="title">section</span>&gt;</span>
<span class="vbscript">&lt;% } %&gt;</span>
</code></pre><h2 id="-66ff-6362-5206-4eab-6a21-5757-">替换分享模块</h2>
<p>原因同上……</p>
<p>在<a href="http://share.baidu.com/code" target="_blank">百度分享</a>获取代码，并在<code>themes/light/layout/_partial/article.ejs</code>中，将<code>&lt;%-partial(&#39;post/share&#39;)%&gt;</code>替换掉即可。</p>
<h2 id="-6dfb-52a0-Feed">添加Feed</h2>
<p>虽说什么都没写呢，也根本没人来看，但是折腾是无止境的╮(╯_╰)╭</p>
<p>安装feed插件</p>
<pre><code><span class="comment">npm</span> <span class="comment">install</span> <span class="comment">hexo</span><span class="literal">-</span><span class="comment">generator</span><span class="literal">-</span><span class="comment">feed</span>
</code></pre><p>在<code>/_config.yml</code>中，添加以下代码：</p>
<pre><code><span class="comment">plugins:</span> 
<span class="literal">-</span> <span class="comment">hexo</span><span class="literal">-</span><span class="comment">generator</span><span class="literal">-</span><span class="comment">feed</span>
</code></pre><p>在<code>themes/light/_config.yml</code>中，修改：</p>
<pre><code><span class="attribute">rss</span>: <span class="string">/atom.xml</span>
</code></pre><p>在<code>themes/light/layout/_partial/header.ejs</code>中，<code>&lt;ul&gt;</code>和<code>&lt;/ul&gt;</code>之间，添加代码：</p>
<pre><code><span class="tag">&lt;<span class="title">li</span>&gt;</span> <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"/atom.xml"</span>&gt;</span>RSS<span class="tag">&lt;/<span class="title">a</span>&gt;</span> <span class="tag">&lt;/<span class="title">li</span>&gt;</span>
</code></pre><p>如果node.js正在运行，记得重启，npm安装了插件是需要重启生效的。</p>
<h2 id="-6dfb-52a0-sitemap-6a21-5757-">添加sitemap模块</h2>
<p>和添加RSS类似，执行下面命令：</p>
<pre><code><span class="comment">npm</span> <span class="comment">install</span> <span class="comment">hexo</span><span class="literal">-</span><span class="comment">generator</span><span class="literal">-</span><span class="comment">sitemap</span>
</code></pre><p>在<code>/_config.yml</code>中，添加代码：</p>
<pre><code><span class="comment">plugins:</span> 
<span class="literal">-</span> <span class="comment">hexo</span><span class="literal">-</span><span class="comment">generator</span><span class="literal">-</span><span class="comment">feed</span>
<span class="literal">-</span> <span class="comment">hexo</span><span class="literal">-</span><span class="comment">generator</span><span class="literal">-</span><span class="comment">sitemap</span>
</code></pre><p>访问 <a href="http://halochou.github.com/sitemap.xml">http://halochou.github.com/sitemap.xml</a> 即可看到网站地图。</p>
<h1 id="-90e8-7f72-GitHub">部署GitHub</h1>
<p>Hexo部署到GitHub是通过先生成静态网站代码，再<code>git push</code>到GitHub上完成的。</p>
<h2 id="-5efa-7acb-GitHub_Repo">建立GitHub Repo</h2>
<p>首先新建一个Repo，名称应是username.github.com，如果不想放在这个域名的根目录里另有他法，之后再补充。</p>
<h2 id="-5411-Hexo-6dfb-52a0-90e8-7f72-4fe1-606f-">向Hexo添加部署信息</h2>
<p>修改<code>/_config.yml</code>：</p>
<pre><code><span class="label">deploy:</span>
    type: github
    repo: git@github<span class="preprocessor">.com</span>:halochou/halochou<span class="preprocessor">.github</span><span class="preprocessor">.com</span><span class="preprocessor">.git</span>
</code></pre><h2 id="-751f-6210-9759-6001-7ad9-70b9-">生成静态站点</h2>
<p>只需要一条命令：</p>
<pre><code><span class="title">hexo</span> generate
</code></pre><p>或者</p>
<pre><code><span class="title">hexo</span> g
</code></pre><h2 id="-90e8-7f72-7ad9-70b9-">部署站点</h2>
<p>还是只有一个命令：</p>
<pre><code><span class="title">hexo</span> deploy
</code></pre><p>或者</p>
<pre><code><span class="title">hexo</span> d
</code></pre><h1 id="Bug">Bug</h1>
<p>我在配置Hexo过程中，出现过<code>hexo s</code>正常，但是<code>hexo g</code>报错<code>EISDIR</code>的故障，与使用<code>hexo new page &quot;about&quot;</code>有关，new page在<code>/source</code>内创建了一个文件夹，但hexo g无法识别，暂未找到解决办法，建议在配置Hexo过程中多generate，节省Debug时间。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  

  <nav id="pagination">
  
  
  <div class="clearfix"></div>
</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:halochou.github.com">
  </form>
</div>

  

  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/hexo/" style="font-size: 10.00px;">hexo</a><a href="/tags/life/" style="font-size: 20.00px;">life</a><a href="/tags/linux/" style="font-size: 10.00px;">linux</a><a href="/tags/markdown/" style="font-size: 10.00px;">markdown</a>
  </div>
</div>


  <div class="widget tag">
<h3 class="title">友情博客</h3>
<ul class="entry">
<li><a href="http://blog.diaoboyu.cn/" title="博宇的BLOG">博宇的BLOG</a></li>
</ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2014 Zhou Yang
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>